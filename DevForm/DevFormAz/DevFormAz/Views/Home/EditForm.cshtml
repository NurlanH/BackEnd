@model DevFormAz.Models.Form
@{
    ViewBag.Title = "EditForm";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var taglist = "";
}

    <section class="pageWrapperForIndex  mt-3 mb-3">
        <div class="container foreditForm">
            <div class="formBox">
                <form action="/Home/FormEdit" method="Post" enctype="multipart/form-data">
                    <input type="hidden" value="@DateTime.Now" name="formtime"/>
                    <div class="formHead mb-2">
                        <input class="form-control " name="name" value="@Model.Name" />
                    </div>
                    <div class="formDesc mb-2">
                        <input class="form-control" name="description" value="@Model.Description" />
                    </div>

                    <div class="formTagList mb-2">
                        @foreach (var tag in Model.TagLists)
                        {
                            taglist += tag + " ";
                        }
                        <input class="form-control" placeholder="Tag" name="editTag" value="@taglist" />
                    </div>

                    <div class="formImg mb-2">
                        <input type="file" style="padding:4px;" class="form-control" name="editImg" value="" multiple/>
                        <div class="imgBox mt-2 d-flex justify-content-around flex-wrap">
                            @foreach (var img in Model.FormImages.Where(fid=>fid.FormId == Model.Id))
                            {
                                <img class="clickfordelete" width="70" src="~/Public/Images/PostImgs/@img.ImageName" />
                            }
                            <input id="deleteList" type="hidden" name="deleteimg"/>
                        </div>
                    </div>

                </form>
            </div>
            

        </div>
    </section>

@section scripts{

    <script>
        $(document).on("click", ".clickfordelete", function () {
            var clickedImgArr = $(this).attr("src").split("/");
            if ($(this).css("opacity") != 0.5) {
                $(this).css({ "opacity": "0.5" })
                document.getElementById("deleteList").value += clickedImgArr[clickedImgArr.length-1] + ","
            } else {
                $(this).css({ "opacity": "1" })

                $('#deleteList').each(function () {
                    var removedeleteimg = $(this).val().split(",");
                    console.log($(this).val() == clickedImgArr[clickedImgArr.length - 1] + ",")

                    for (let i = 0; i < removedeleteimg.length; i++) {
                        if (removedeleteimg[i] == clickedImgArr[i])
                      // need to fix it!
                    }
                      });
            }
            
            console.log()
        })
    </script>
    
}